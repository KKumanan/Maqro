(()=>{"use strict";var e;!function(e){e.PAGE_VIEW="page_view",e.SCROLL="scroll",e.CLICK="click",e.FOCUS="focus"}(e||(e={}));const t={scrollThrottle:100,lastScrollTime:0,isCollecting:!0,pageLoadTime:Date.now()};function o(e){t.isCollecting?(console.log("Maqro: Sending event",e),chrome.runtime.sendMessage({type:"USER_EVENT",event:e},(e=>{chrome.runtime.lastError?console.error("Maqro: Error sending event",chrome.runtime.lastError):console.log("Maqro: Event sent successfully",e)}))):console.log("Maqro: Event collection is paused")}document.addEventListener("click",(t=>{const n=t.target;var r;o({event_type:e.CLICK,url:window.location.href,selector:(r=n,r.id?`#${r.id}`:r.classList.length>0?`.${Array.from(r.classList).join(".")}`:r.getAttribute("href")?`[href*="${r.getAttribute("href")}"]`:r.tagName.toLowerCase()),x:t.clientX,y:t.clientY,timestamp:(new Date).toISOString()})})),document.addEventListener("scroll",(n=>{const r=Date.now();r-t.lastScrollTime<t.scrollThrottle||(t.lastScrollTime=r,o({event_type:e.SCROLL,url:window.location.href,scrollY:window.scrollY,timestamp:(new Date).toISOString()}))})),window.addEventListener("focus",(()=>{o({event_type:e.FOCUS,url:window.location.href,state:"focus",timestamp:(new Date).toISOString()})})),window.addEventListener("blur",(()=>{o({event_type:e.FOCUS,url:window.location.href,state:"blur",timestamp:(new Date).toISOString()})})),chrome.runtime.onMessage.addListener(((e,o,n)=>{var r;console.log("Maqro: Received message",e),"TOGGLE_COLLECTION"===e.type&&(t.isCollecting=null!==(r=e.enabled)&&void 0!==r&&r,console.log("Maqro: Collection state changed to",t.isCollecting),n({success:!0}))})),console.log("Maqro: Content script loaded"),function(){console.log("Maqro: Tracking page view");const n={event_type:e.PAGE_VIEW,url:window.location.href,title:document.title,duration:0,timestamp:(new Date).toISOString()};o(n),window.addEventListener("beforeunload",(()=>{const e=Math.floor((Date.now()-t.pageLoadTime)/1e3);n.duration=e,o(n)}))}()})();
//# sourceMappingURL=content.js.map