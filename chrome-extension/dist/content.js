(()=>{"use strict";var e;!function(e){e.PAGE_VIEW="page_view",e.CLICK="click",e.SCROLL="scroll",e.FOCUS="focus"}(e||(e={})),window.maqroContentScriptLoaded?console.warn("Maqro content script already loaded"):(window.maqroContentScriptLoaded=!0,function(){const t=[];let n=!0;function o(e){console.log("Maqro:",e)}function i(e){n&&(t.push(e),o(`Event captured: ${e.event_type} (${t.length} total)`),t.length>=10&&r())}function r(){if(0===t.length)return;const e=[...t];t.length=0,chrome.runtime.sendMessage({type:"USER_EVENTS",events:e},(n=>{chrome.runtime.lastError?(o(`Failed to send ${e.length} events: ${chrome.runtime.lastError.message}`),t.unshift(...e)):o(`Sent ${e.length} events successfully`)}))}document.addEventListener("click",(t=>{const n=t.target;var o;i({event_type:e.CLICK,url:window.location.href,selector:(o=n,o.id?`#${o.id}`:o.classList.length>0?`.${Array.from(o.classList).slice(0,2).join(".")}`:o.tagName.toLowerCase()),x:t.clientX,y:t.clientY,timestamp:(new Date).toISOString()})}));let s=0;document.addEventListener("scroll",(()=>{const t=Date.now();t-s<1e3||(s=t,i({event_type:e.SCROLL,url:window.location.href,scrollY:window.scrollY,timestamp:(new Date).toISOString()}))})),window.addEventListener("focus",(()=>{i({event_type:e.FOCUS,url:window.location.href,state:"focus",timestamp:(new Date).toISOString()})})),window.addEventListener("blur",(()=>{i({event_type:e.FOCUS,url:window.location.href,state:"blur",timestamp:(new Date).toISOString()}),r()})),chrome.runtime.onMessage.addListener(((e,t,i)=>{"TOGGLE_COLLECTION"===e.type&&(n=e.enabled,o("Collection "+(n?"enabled":"disabled")),n||r(),i({success:!0}))})),setInterval(r,3e4),window.addEventListener("beforeunload",r),i({event_type:e.PAGE_VIEW,url:window.location.href,title:document.title,duration:0,timestamp:(new Date).toISOString()}),o("Event tracking initialized")}())})();
//# sourceMappingURL=content.js.map